<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>AJAX</title>
  </head>

  <body>
    <h1>Learn AJAX</h1>
    <div id="output">
    </div>
    <button id="trigger">Get a Joke</button>
    <script type="text/javascript">

      var joker = document.querySelector('#trigger')
      joker.addEventListener("click", loadJoke);
      var output = document.getElementById("output");

      function loadJoke(){
        var ajax = new XMLHttpRequest();
        ajax.onreadystatechange = function(){
          if(this.readyState == 4 && this.status == 200){
              console.log(this.responseText);
              var json = JSON.parse(this.responseText);
              // <img src="smiley.gif" alt="Smiley face" height="42" width="42">

              var html = '<div>' + '<img src="' + json.icon_url +'" alt="Chuck Norris" height="100" width="100">' + json.value +'<div>';
              document.querySelector('#output').innerHTML = html;

          }
        }
        ajax.open("GET", "https://api.chucknorris.io/jokes/random", true);
        ajax.send();
      }

    </script>
  </body>
</html>